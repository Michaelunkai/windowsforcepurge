sudo apt update && sudo apt install -y autoconf gcc libc6 make wget unzip apache2 php libapache2-mod-php7.4 libgd-dev && sudo useradd nagios && sudo groupadd nagcmd && sudo usermod -a -G nagcmd nagios && cd /tmp && wget https://assets.nagios.com/downloads/nagioscore/releases/nagios-4.4.6.tar.gz && tar xzf nagios-*.tar.gz && cd nagios-4.4.6 && ./configure --with-nagios-group=nagios --with-command-group=nagcmd && make all && sudo make install && sudo make install-init && sudo make install-config && sudo make install-commandmode && sudo make install-webconf && sudo htpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin && sudo a2enmod rewrite cgi && sudo systemctl restart apache2 && cd /tmp && wget https://nagios-plugins.org/download/nagios-plugins-2.3.3.tar.gz && tar xzf nagios-plugins-*.tar.gz && cd nagios-plugins-2.3.3 && ./configure --with-nagios-user=nagios --with-nagios-group=nagios --with-openssl && make && sudo make install && sudo /usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg && sudo systemctl start nagios.service && sudo systemctl enable nagios.service && echo "Access Nagios at: http://$(hostname -I | awk '{print $1}')/nagios"
