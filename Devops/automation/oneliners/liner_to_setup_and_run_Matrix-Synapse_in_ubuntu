sudo apt install -y lsb-release wget apt-transport-https && sudo wget -qO /usr/share/keyrings/matrix-org-archive-keyring.gpg https://packages.matrix.org/debian/matrix-org-archive-keyring.gpg && echo "deb [signed-by=/usr/share/keyrings/matrix-org-archive-keyring.gpg] https://packages.matrix.org/debian/ $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/matrix-org.list && sudo apt update && sudo apt install -y matrix-synapse-py3 && sudo systemctl start matrix-synapse && sudo systemctl enable matrix-synapse && sudo apt install -y nginx && echo "server { listen 80; server_name your_domain.com; location / { proxy_pass http://localhost:8008; proxy_set_header X-Forwarded-For \$remote_addr; } }" | sudo tee /etc/nginx/sites-available/matrix && sudo ln -s /etc/nginx/sites-available/matrix /etc/nginx/sites-enabled/ && sudo nginx -t && sudo systemctl restart nginx && sudo apt install -y certbot python3-certbot-nginx && sudo certbot --nginx -d your_domain.com && sudo systemctl restart nginx && sudo register_new_matrix_user -c /etc/matrix-synapse/homeserver.yaml http://localhost:8008
