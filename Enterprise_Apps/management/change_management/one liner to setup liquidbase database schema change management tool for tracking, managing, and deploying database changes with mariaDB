sudo apt update && sudo apt install -y openjdk-11-jdk maven git mariadb-server wget && sudo snap install liquibase --classic && mkdir -p ~/liquibase_project && wget https://repo1.maven.org/maven2/org/mariadb/jdbc/mariadb-java-client/2.7.3/mariadb-java-client-2.7.3.jar -O ~/liquibase_project/mariadb-java-client-2.7.3.jar && echo 'export PATH=$PATH:/snap/bin' >> ~/.bashrc && source ~/.bashrc && sudo systemctl start mariadb && sudo systemctl enable mariadb && sudo mysql -e "CREATE DATABASE mydatabase;" && sudo mysql -e "CREATE USER 'myuser'@'localhost' IDENTIFIED BY '123456';" && sudo mysql -e "GRANT ALL PRIVILEGES ON mydatabase.* TO 'myuser'@'localhost';" && sudo mysql -e "FLUSH PRIVILEGES;" && cd ~/liquibase_project && echo -e "changeLogFile=dbchangelog.xml\nurl=jdbc:mariadb://localhost:3306/mydatabase\nusername=myuser\npassword=123456\ndriver=org.mariadb.jdbc.Driver\nclasspath=mariadb-java-client-2.7.3.jar" > liquibase.properties && echo -e '<?xml version="1.0" encoding="UTF-8"?>\n<databaseChangeLog\n xmlns="http://www.liquibase.org/xml/ns/dbchangelog"\n xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog\n http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">\n <changeSet id="1" author="yourname">\n <createTable tableName="person">\n <column name="id" type="int">\n <constraints primaryKey="true" nullable="false"/>\n </column>\n <column name="firstname" type="varchar(50)"/>\n <column name="lastname" type="varchar(50)"/>\n <column name="age" type="int"/>\n </createTable>\n </changeSet>\n</databaseChangeLog>' > dbchangelog.xml && liquibase update && mysql -u myuser -p123456 -D mydatabase -e "SHOW TABLES;" && mysql -u myuser -p123456 -D mydatabase -e "DESCRIBE person;"
