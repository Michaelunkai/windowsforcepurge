Create and Apply SSL Certificates for OpenFire XMPP Instant Messaging Server
Prerequisites
A XCA PKI database https://youtu.be/ezzj3x207lQ
Create Your SSL Certificate
Launch XCA
Open the PKI database if it is not already (File > Open DataBase), enter password
Click on the Certificates tab, right click on your Intermediate CA certificate
Select New
On the Source tab, make sure Use this Certificate for signing is selected
Verify your Intermediate CA certificate is selected from the drop down
Click the Subject tab
Complete the Distinguished Name section
internalName: chat.i12bretro.local
countryName: US
stateOrProvinceName: Virginia
localityName: Northern
organizationName: i12bretro
organizationUnitName: i12bretro Certificate Authority
commonName: chat.i12bretro.local

Click the Generate a New Key button
Enter a name and set the key size to at least 2048
Click Create
Click on the Extensions tab
Select End Entity from the type list
Click Edit next to Subject Alternative Name
Add any DNS or IP addresses that the certificate will identify
Update the validity dates to fit your needs
Click the Key Usage tab
Under Key Usage select Digital Signature, Key Encipherment
Under Extended Key Usage select Web Server and Web Client Authentication
Click the Netscape tab
Select SSL Server
Click OK to create the certificate
Exporting Required Files
In XCA, click on the Certificates tab
Right click the Root CA certificate > Export > File
Set the file name with a .crt extension and verify the export format is PEM (*.crt)
Click OK
Right click the Intermediate CA certificate > Export > File
Set the file name with a .crt extension and verify the export format is PEM (*.crt)
Click OK
Right click the SSL certificate > Export > File
Set the file name with a .crt extension and verify the export format is PEM (*.crt)
Click OK
Click the Private Keys tab
Right click the private key generated for the SSL certificate > Export > File
Set the file name with a .pk8 extension and verify the export format is PKCS #8 (*.pk8)
Click OK
Applying SSL Certificate to OpenFire
Log into the OpenFire Admin Console
Click the TLS/SSL Certificates tab in the top sub-navigation menu
Click the Manage Store Contents link under Server Trust store (middle option)
Click the import form link
Give the certificate an alias and paste the contents of the exported Root CA .crt file > Click Save
Click the import form link again
Give the certificate an alias and paste the contents of the exported Intermediate CA .crt file > Click Save
Click the TLS/SSL Certificates tab in the top sub-navigation menu
Click the Manage Store Contents link under Identity store (top option)
Click the imported here link
Paste the contents of the exported private key .pk8 file into the private key field
Paste the contents of the exported certificate .crt file into the certificate field
Click Save
Click the delete icon next to the self-signed certificate generated by OpenFire > Click OK to confirm the delete action
Click the TLS/SSL Certificates tab in the top sub-navigation menu
Click the Client Trust Store Contents link under Identity store (bottom option)
Click the import form link
Give the certificate an alias and paste the contents of the exported Root CA .crt file > Click Save
Click the import form link again
Give the certificate an alias and paste the contents of the exported Intermediate CA .crt file > Click Save
Restart the OpenFire service
Once OpenFire has completed started, navigate to https://DNS:9091/ to access the Admin Console over SSL
In the OpenFire Admin Console click on Sessions in the top navigation to view active client connections and their current SSL communication status
